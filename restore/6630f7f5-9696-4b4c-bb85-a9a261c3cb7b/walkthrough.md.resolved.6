# üìä Transaction File Format Analysis

## Summary

I analyzed 3 files: **Fold CSV**, **Paytm CSV**, and **Paytm PDF**. Here's my structural breakdown and recommendation.

---

## 1. Fold Transactions CSV ([Fold-Transactions-2025-12-06_02-39AM.csv](file:///c:/Users/gadda/Downloads/wealth-aggregator-v1.1%20%283%29/format_files/Fold-Transactions-2025-12-06_02-39AM.csv))

### Structure
| Column # | Header | Data Type | Example |
|----------|--------|-----------|---------|
| 1 | `account_number` | String (masked) | `XXXXXXXXXXXXX5766` |
| 2 | `card_number` | String (optional) | *(mostly empty)* |
| 3 | `card_name` | String (optional) | *(mostly empty)* |
| 4 | `bank_name` | String | `State Bank of India`, `ICICI Bank` |
| 5 | `txn_timestamp` | ISO 8601 DateTime | `2025-12-04T08:50:36Z` |
| 6 | `amount` | Number | `19000`, `349`, `15.00` |
| 7 | `current_balance` | Number | `47695.70` |
| 8 | `type` | Enum | `CREDIT` / `DEBIT` |
| 9 | `narration` | String (raw bank text) | `WDL TFR   UPI/DR/694970844644/RELIANCE/CITI/jio@citiba/` |
| 10 | `reference` | String (optional) | *(mostly empty)* |
| 11 | `merchant` | String (extracted) | `RELIANCE`, `GULLAKMO`, `Swiggy` |
| 12 | `category_icon_name` | String | `Phone`, `Gold`, `Swiggy`, `Pizza` |
| 13 | `category` | String | `Bill`, [Investment](file:///c:/Users/gadda/Downloads/wealth-aggregator-v1.1%20%283%29/types.ts#28-42), `Food & Drinks`, `Shopping` |
| 14 | `notes` | String (optional) | *(mostly empty)* |
| 15 | `excluded_from_cash_flow` | Boolean | `Yes` / `No` |
| 16 | `tracking_method` | String | `AA` (Aggregator Sync) |

### Pre-Tagged Categories Found
- [Investment](file:///c:/Users/gadda/Downloads/wealth-aggregator-v1.1%20%283%29/types.ts#28-42) (Gold, Mutual Funds, IPO)
- `Bill` (Phone, Recharge)
- `Food & Drinks` (Swiggy, Zomato, Take Away, Snacks, Beverages, Pizza)
- `Shopping` (Electronics, Clothes, Books)
- `Transport` (Train, Bus)
- `Entertainment` (Movies)
- `Services` (Laundry)
- `Hidden Charges` (Bank fees)
- `Self Transfer`
- `Lent`
- `Interest`
- `Cashback`
- `Earnings`

### üî• Key Insight: This data is **pre-cleaned and tagged**!
Fold has already done ML-based categorization. This is **gold** for import.

---

## 2. Paytm UPI Statement CSV (`Paytm_UPI_Statement_08_Dec'24_-_07_Dec'25.csv`)

### Structure
| Column # | Header | Data Type | Example |
|----------|--------|-----------|---------|
| 1 | [Date](file:///c:/Users/gadda/Downloads/wealth-aggregator-v1.1%20%283%29/components/journal/PnLCalendar.tsx#85-93) | Date (DD/MM/YYYY) | `07/12/2025` |
| 2 | `Time` | Time (HH:MM:SS) | `16:55:08` |
| 3 | `Transaction Details` | String | `Paid to Kp East Enterprises` |
| 4 | `Other Transaction Details (UPI ID or A/c No)` | String | `paytm.s16sata@pty on Paytm` |
| 5 | `Your Account` | String | `State Bank Of India - 66` |
| 6 | `Amount` | Signed Number | `-1,050.00` or `+9,000.00` |
| 7 | `UPI Ref No.` | String | `296323516511` |
| 8 | `Order ID` | String (optional) | *(mostly empty)* |
| 9 | `Remarks` | String (optional) | `JIO20BR000CGN8JDX...` |
| 10 | `Tags` | Emoji-prefixed String | `#ü•ò Food`, `#ü™ô Investment`, `#üéà Entertainment` |
| 11 | `Comment` | String (optional) | *(mostly empty)* |

### Pre-Tagged Categories (Emoji-based)
- `#ü•ò Food`
- `#üõí Groceries`
- `#üéà Entertainment`
- `#üõç Shopping`
- `#üöï Commute`
- `#üöñ Taxi`
- `#üßæ Recharge`
- `#ü™ô Investment`
- `#üíµ Money Received`
- `#üíµ Money Transfer`
- `#üíµ Transfers`
- `#üîÑ Miscellaneous`

### üî• Key Insight: Also pre-tagged with emojis!
The `Tags` column is perfect for mapping to your app's category system.

---

## 3. Paytm UPI Statement PDF

> [!CAUTION]
> **PDF is NOT parseable directly.** It's an encoded binary file. To extract data from PDFs, you would need a PDF-parsing library (e.g., `pdf-parse` or a Python tool like `pdfplumber`). This is **complex and error-prone** due to:
> - Table detection issues
> - Multi-line wrapping
> - Font encoding problems

---

## üìå Recommendation: CSV > PDF

| Criterion | CSV | PDF |
|-----------|-----|-----|
| **Parseability** | ‚≠ê‚≠ê‚≠ê‚≠ê‚≠ê Native JavaScript | ‚≠ê‚≠ê Requires external library |
| **Data Integrity** | ‚≠ê‚≠ê‚≠ê‚≠ê‚≠ê Exact | ‚≠ê‚≠ê OCR-like issues |
| **Pre-tagged?** | ‚úÖ Yes (both Fold & Paytm) | ‚ùå Raw text |
| **Dev Effort** | Low (~2-3 hours) | High (~10+ hours) |
| **User Experience** | Simple drag-and-drop | Complex multi-step |

> [!IMPORTANT]
> **My strong recommendation: Build CSV import first.** 
> Both Fold and Paytm export to CSV with **pre-tagged categories**, making import trivial. PDF support can be a "Phase 2" feature if truly needed.

---

## üó∫Ô∏è Proposed Field Mapping

### Fold CSV ‚Üí Your App
| Fold Column | Your Transaction Field |
|-------------|------------------------|
| `txn_timestamp` | [date](file:///c:/Users/gadda/Downloads/wealth-aggregator-v1.1%20%283%29/components/AddTradeModal.tsx#136-139) |
| `amount` | `amount` (use `type` to determine sign) |
| `type` | `direction` (`CREDIT` = income, `DEBIT` = expense) |
| `merchant` | `merchant` |
| `category` | `category` (direct mapping!) |
| `bank_name` | `account` |
| `narration` | `notes` |
| `excluded_from_cash_flow` | `isExcluded` (filter out self-transfers) |

### Paytm CSV ‚Üí Your App
| Paytm Column | Your Transaction Field |
|--------------|------------------------|
| [Date](file:///c:/Users/gadda/Downloads/wealth-aggregator-v1.1%20%283%29/components/journal/PnLCalendar.tsx#85-93) + `Time` | [date](file:///c:/Users/gadda/Downloads/wealth-aggregator-v1.1%20%283%29/components/AddTradeModal.tsx#136-139) (combine) |
| `Amount` | `amount` (already signed) |
| `Transaction Details` | `description` |
| `Other Transaction Details` | `upiId` |
| `Tags` | `category` (strip emoji, map) |
| `Your Account` | `account` |
| `Remarks` | `notes` |

---

## Next Steps

1. **Add a "Import Transactions" button** in Dashboard/Settings.
2. **Create a CSV parser utility** that auto-detects format (Fold vs Paytm).
3. **Map fields to your Transaction schema.**
4. **Bulk insert into IndexedDB.**
5. **Display in Spending Timeline / Analytics.**

Shall I proceed with the implementation plan?
